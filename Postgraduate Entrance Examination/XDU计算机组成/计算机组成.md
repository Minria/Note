# 第一章

# 第四章

Cache地址划分

全相连

> 块号+块内地址   →  块号+块内地址

直接映射

> 区号+块号+块内地址  → 块号+块内地址

组相连

> 区号+组号+块号+块内地址 → 组号+块号+块内地址

|      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- |
| R和η | NRZ  | NRZ1 | PM   | FM   | MFM  |
| R    | 0    | 0    | 0.5  | 0.5  | 0.5  |
| η    | 100% | 100% | 50%  | 50%  | 100% |

# 第五章

**RISC和CISC的特点**

RISC的特点

- 指令系统简单

  1、指令条数少，格式少，长度固定，功能简单

  2、寻址方式少

  3、采用硬布线控制逻辑（不用或者少用微程序控制）

- Load/Store结构

  1、只有Load/Store指令可以访问存储器

  2、寄存器多

  3、寄存器窗口技术

- 十分重视提高流水线的执行效率

  1、大部分指令可以在单周期内执行完成

  2、延迟转移技术

- 十分强调优化编译技术的使用

CISC的特点

指令系统复杂、指令数多、指令格式多、寻址方式多、指令执行需要多个周期、采用微程序控制器、多个指令可以访问存储器、寄存器数量有限

# 第七章

|                        |                                              |                                          |
| ---------------------- | -------------------------------------------- | ---------------------------------------- |
| 技术                   | 简要说明                                     | 主要解决问题                             |
| 直通和旁路             | 在流水线段间建立直接的连接通路               | 潜在的数据相关停顿                       |
| 简单转移调度           | 冻结流水线，预取分支目标，多流，循环缓冲器等 | 控制相关停顿                             |
| 延迟分支               | 利用编译器调度，填充延迟槽                   | 控制相关停顿                             |
| 基本动态调度（记分板） | 乱序执行                                     | 真相关引起的数据相关停顿                 |
| 重命名动态调度         | WAW和WAR停顿，乱序执行                       | 数据相关停顿、反相关和输出相关引起的停顿 |
| 分支预测               | 动态分支预测，静态分支预测                   | 控制相关停顿                             |
| 多指令发射             | 多指令流出（超标量和超长指令字）             | 理想CPI                                  |
| 硬件推测               | 用于多指令发射，使用重排序缓存               | 数据相关和控制相关停顿                   |

|                      |                                                              |                                     |
| -------------------- | ------------------------------------------------------------ | ----------------------------------- |
| 循环展开             | 将循环展开为直线代码，消除判断、分支开销，加速流水           | 控制相关停顿                        |
| 基本编译器流水线调度 | 对数据相关指令重排序                                         | 数据相关停顿                        |
| 编译器相关性分析     | 利用编译器发现相关                                           | 理想CPI，数据相关停顿               |
| 软件流水线，踪迹调度 | 软件流水：对循环进行重构，使得每次迭代执行的指令是属于原循环的不同迭代过程的。踪迹调度：跨越IF基本块的并行度。 | 数据相关和控制相关停顿              |
| 硬件支持编译器推测   | 软硬件推测结合                                               | 理想CPI，数据相关停顿，转换相关停顿 |

|            |          |              |        |
| ---------- | -------- | ------------ | ------ |
| 处理器类型 | 指令成组 | 分配功能单元 | 启动   |
| 动态超标量 | 硬件     | 硬件         | 硬件   |
| 静态超标量 | 编译器   | 硬件         | 硬件   |
| 动态VLIW   | 编译器   | 编译器       | 硬件   |
| VLIW       | 编译器   | 编译器       | 编译器 |

|                      |          |          |                |                                        |                                        |
| -------------------- | -------- | -------- | -------------- | -------------------------------------- | -------------------------------------- |
| 方法名称             | 发射结构 | 相关检测 | 调度           | 主要特征                               | 实例                                   |
| 超标量<br><br>(静态) | 动态     | 硬件     | 静态           | 按序执行                               | 主要在嵌入领域：MIPS、ARM              |
| 超标量<br><br>(动态) | 动态     | 硬件     | 动态           | 部分乱序执行，无推测                   | 目前还没有                             |
| 超标量<br><br>(推测) | 动态     | 硬件     | 带有推测的动态 | 具有推测的乱序执行                     | Pentium 4、MIPS R12K、IBM Power 5      |
| VLIW /<br><br>LIW    | 静态     | 软件为主 | 静态           | 相关由编译器确定和指示（通常是隐式的） | 大多数实例在嵌入领域，<br><br>如TI C6x |
| EPIC                 | 静态为主 | 软件为主 | 多数是静态     | 所有相关由编译器显式地确定和指示       | Itanium                                |